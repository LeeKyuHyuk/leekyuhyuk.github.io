<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta property="og:image" content="https://kyuhyuk.kr/thumbnail.png"/><title>HEIC를 JPG로 손쉽게 바꿔주는 iHEIC 개발 후기</title><meta name="author" content="KyuHyuk Lee"/><meta name="generator" content="KyuHyuk Lee"/><meta name="description" content=" 여자친구가 회사 업무로 아이폰으로 찍은 사진을 Windows PC로 옮길 일이 잦은데 일일이 변환해 주기 귀찮기도 하고, 그렇다고 웹 사이트에서 JPG로 변환해서 쓰라고 하기에는 서비스를 제공하는 웹사이트의 서버에저장되는 걸 원치 않을 거 같아 iHEIC라는 프로그램을 만들어보았습니다"/><meta itemProp="url" content="https://kyuhyuk.kr/article/ordinary-life/2021/09/05/iHEIC-Development-Story"/><meta itemProp="headline" content="HEIC를 JPG로 손쉽게 바꿔주는 iHEIC 개발 후기"/><meta property="og:type" content="article"/><meta property="og:url" content="https://kyuhyuk.kr/article/ordinary-life/2021/09/05/iHEIC-Development-Story"/><meta property="og:title" content="HEIC를 JPG로 손쉽게 바꿔주는 iHEIC 개발 후기"/><meta property="og:description" content=" 여자친구가 회사 업무로 아이폰으로 찍은 사진을 Windows PC로 옮길 일이 잦은데 일일이 변환해 주기 귀찮기도 하고, 그렇다고 웹 사이트에서 JPG로 변환해서 쓰라고 하기에는 서비스를 제공하는 웹사이트의 서버에저장되는 걸 원치 않을 거 같아 iHEIC라는 프로그램을 만들어보았습니다"/><meta property="og:site_name" content="KyuHyuk Blog"/><meta property="og:locale" content="ko_KR"/><meta name="next-head-count" content="15"/><style id="stitches">--sxs{--sxs:2 c-opBYf c-bHyrwK c-uBnvQ c-hehuMV c-bjkCdF c-hAoZGi c-jfcKOQ c-ezyKJG c-iAzQif c-bvdusc c-ezRQNp c-iosjjB c-jYwCTI c-iOPkYY c-cpkrrK c-fiqONv c-iUFgVP c-cshSRb c-fxvkZv c-dIcdES}@media{.c-opBYf{display:flex;align-items:center;background:#FFFFFF;height:60px;justify-content:space-between;-webkit-box-align:center;-webkit-box-pack:justify}.c-bHyrwK{display:flex;align-items:center;justify-content:center;-webkit-box-align:center;-webkit-box-pack:center}.c-uBnvQ{width:32px;height:32px;color:#FFFFFF;background:#000000;border-radius:4px;display:flex;align-items:center;justify-content:center;margin-right:12px;font-weight:700;cursor:default;-webkit-box-align:center;-webkit-box-pack:center}.c-hehuMV{font-weight:900;font-size:18px;letter-spacing:0.5px;color:#000000;cursor:default}.c-bjkCdF{list-style:none;padding:0;margin:0;display:flex;justify-content:center;align-items:center;font-size:24px;color:rgb(134, 142, 150);transition:all 0.3s ease 0s;-webkit-box-pack:center;-webkit-box-align:center}.c-hAoZGi{font-size:28px;color:inherit;text-decoration:none;margin:8px}.c-jfcKOQ{max-width:768px;margin-top:2rem;margin-left:auto;margin-right:auto}.c-ezyKJG{min-width:72px;display:flex;flex-direction:row;justify-content:center;align-items:center;padding:6px 16px;background:#12B886;box-shadow:0px 1px 2px rgba(98, 16, 204, 0.3);border:none;border-radius:14px;vertical-align:middle;color:#FFFFFF;font-size:1rem;height:2rem;float:right}.c-iAzQif{display:inline-block;margin-top:2rem}.c-bvdusc{font-size:2rem;line-height:1.5;letter-spacing:-0.004em;margin-top:0;margin-bottom:2rem;font-weight:700;color:#212529;word-break:keep-all;transition:color 0.125s ease-in 0s;}.c-ezRQNp{font-size:1.125rem;color:#212529;transition:color 0.125s ease-in 0s;;line-height:1.7;letter-spacing:-0.004em;word-break:break-all;overflow-wrap:break-word}.c-iosjjB{background:#F8F9FA;padding:0 1rem;height:2rem;border-radius:1rem;display:inline-flex;align-items:center;margin-right:0.875rem;color:#12B886;text-decoration:none;font-weight:400;font-size:1rem}.c-jYwCTI{font-size:1rem;color:#495057}.c-iOPkYY{margin-top:3rem;background-color:rgba(51,51,51,.1);border:0;height:1px}.c-cpkrrK{width:100%;height:300px;display:flex;align-items:center;justify-content:center;flex-direction:column;-webkit-box-align:center;-webkit-box-pack:center}.c-fiqONv{color:rgb(206, 212, 218);margin-bottom:8px;font-size:22px;font-weight:700}.c-iUFgVP{width:32px;height:32px;color:#FFFFFF;background:rgb(206, 212, 218);border-radius:4px;display:flex;align-items:center;justify-content:center;margin-right:12px;font-weight:700;cursor:default;-webkit-box-align:center;-webkit-box-pack:center}.c-cshSRb{font-weight:900;font-size:18px;letter-spacing:0.5px;color:rgb(206, 212, 218);cursor:default;text-transform:uppercase}.c-fxvkZv{font-size:2.5rem;line-height:1.5;letter-spacing:-0.004em;margin-top:0;margin-bottom:2rem;font-weight:700;color:#212529;word-break:keep-all;transition:color 0.125s ease-in 0s;}.c-dIcdES{margin-top:2rem;font-size:1.125rem;color:#212529;transition:color 0.125s ease-in 0s;;line-height:1.7;letter-spacing:-0.004em;word-break:keep-all;overflow-wrap:break-word}}</style><link rel="preload" href="/_next/static/css/98b299b94b0a7962.css" as="style"/><link rel="stylesheet" href="/_next/static/css/98b299b94b0a7962.css" data-n-g=""/><link rel="preload" href="/_next/static/css/c2a527101433f11d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c2a527101433f11d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-c354a30bda3d62a6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8265bb1a072646d3.js" defer=""></script><script src="/_next/static/chunks/776-f277552409ab147f.js" defer=""></script><script src="/_next/static/chunks/305-e325b960616dc0fd.js" defer=""></script><script src="/_next/static/chunks/pages/article/%5Bcategory%5D/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bslug%5D-aa033f8eb8939164.js" defer=""></script><script src="/_next/static/nfr2aTSmvqwqhq5MQ8S8d/_buildManifest.js" defer=""></script><script src="/_next/static/nfr2aTSmvqwqhq5MQ8S8d/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="c-opBYf"><a href="https://kyuhyuk.kr"><div class="c-bHyrwK"><div class="c-uBnvQ">Kh.</div><div class="c-hehuMV">KyuHyuk Blog</div></div></a><ul class="c-bjkCdF"><li><a href="https://github.com/LeeKyuHyuk" class="c-hAoZGi"><span role="img" aria-label="github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></span></a></li><li><a href="https://linkedin.com/in/leekyuhyuk" class="c-hAoZGi"><span role="img" aria-label="linkedin" class="anticon anticon-linkedin"><svg viewBox="64 64 896 896" focusable="false" data-icon="linkedin" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM349.3 793.7H230.6V411.9h118.7v381.8zm-59.3-434a68.8 68.8 0 1168.8-68.8c-.1 38-30.9 68.8-68.8 68.8zm503.7 434H675.1V608c0-44.3-.8-101.2-61.7-101.2-61.7 0-71.2 48.2-71.2 98v188.9H423.7V411.9h113.8v52.2h1.6c15.8-30 54.5-61.7 112.3-61.7 120.2 0 142.3 79.1 142.3 181.9v209.4z"></path></svg></span></a></li><li><a href="mailto:lee@kyuhyuk.kr" class="c-hAoZGi"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-80.8 108.9L531.7 514.4c-7.8 6.1-18.7 6.1-26.5 0L189.6 268.9A7.2 7.2 0 01194 256h648.8a7.2 7.2 0 014.4 12.9z"></path></svg></span></a></li></ul></header><main class="c-jfcKOQ"><article><h1 class="c-fxvkZv"><a href="https://kyuhyuk.kr/article/ordinary-life/2021/09/05/iHEIC-Development-Story">HEIC를 JPG로 손쉽게 바꿔주는 iHEIC 개발 후기</a></h1><a href="https://kyuhyuk.kr/category/Ordinary-Life" class="c-iosjjB">Ordinary Life</a><time dateTime="2021-09-05 00:49:09" class="c-jYwCTI">Sep 05, 2021 12:49:09 AM</time><div id="post" class="c-dIcdES"><p>여자친구가 회사 업무로 아이폰으로 찍은 사진을 Windows PC로 옮길 일이 잦은데 일일이 변환해 주기 귀찮기도 하고, 그렇다고 웹 사이트에서 JPG로 변환해서 쓰라고 하기에는 서비스를 제공하는 웹사이트의 서버에저장되는 걸 원치 않을 거 같아 iHEIC라는 프로그램을 만들어보았습니다.</p>
<p>제가 기존에 사용했던 프로그램은 <a href="https://github.com/strukturag">strukturag</a>님이 만든 <a href="https://github.com/strukturag/libheif">libheif</a>를 이용하였습니다. 문제는 터미널에서 명령어를 입력해야 하기 때문에 이런 것에 익숙하지 않은 사람들은 사용하기 힘들 것으로 보여 iHEIC를 만들었습니다.</p>
<p><strong>iHEIC는 아래와 같이 동작합니다:</strong></p>
<ol>
<li>iHEIC에 변환할 HEIC 파일을 드래그하여 추가합니다.</li>
<li>Start 버튼을 눌러 변환을 추가합니다.</li>
<li>iHEIC에 추가한 파일이 있었던 위치에 변환된 JPG 파일이 위치하게 됩니다.</li>
</ol>
<p><img src="/assets/image/2021-09-06-iHEIC-Development-Story/2021-09-06-iHEIC-Development-Story_1.gif" alt="iHEIC Preview"></p>
<h2>왜 Electron으로 개발했나요?</h2>
<p>Windows, Linux, macOS 모두 지원하는 프로그램을 만들고 싶었습니다!</p>
<p>Electron으로 개발하게 되면 소스코드 하나로 여러 OS에서 동작하는 프로그램을 만들 수 있습니다.<br>
또한 <a href="https://reactjs.org/">React</a>와 <a href="https://ant.design/">Ant Design</a> Component를 사용한다면 간편하게 GUI 프로그램을 만들 수 있습니다.</p>
<p><img src="/assets/image/2021-09-06-iHEIC-Development-Story/2021-09-06-iHEIC-Development-Story_2.png" alt="iHEIC running on Windows, Linux and macOS"></p>
<h2>개발하면서 힘들었던 점은 무엇인가요?</h2>
<p><a href="https://github.com/strukturag/libheif">libheif</a>에 있는 <code>heif-convert</code>를 정적으로 컴파일하여 libjpeg, libde265, libheif 라이브러리가 설치되어 있지 않은 환경에서도 사용할 수 있게 만들고 싶었습니다.<br>
하지만, libc가 정적으로 빌드가 되어있지 않아서 Linking하는 단계에서 오류가 발생하여 결국 <a href="https://github.com/LeeKyuHyuk/x86_64-static-linux-musl">x86_64-static-linux-musl</a>라는 크로스 컴파일러를 만들어 해결하였습니다.<br>
문제는 여기서 끝이 아니었습니다. <code>heif-convert</code>를 Windows, macOS으로 크로스 컴파일을 하려고 했는데 Windows는 <code>x86_64-w64-mingw32</code> 크로스 컴파일러를 빌드 하여 해결하였지만 macOS는 <code>x86_64-apple-darwin</code>와 같은 크로스 컴파일러를 만드는 방법을 몰라 직접 Macbook Air에서 빌드 하려고했습니다.<br>
macOS는 기본으로 LLVM을 사용하는데 <code>LDFLAGS</code>에 <code>-static</code>을 넣어 빌드를 할 수 없다는 걸 한 시간이 지나서야 알게 되었습니다.</p>
<blockquote>
<p><a href="https://stackoverflow.com/questions/3801011/ld-library-not-found-for-lcrt0-o-on-osx-10-6-with-gcc-clang-static-flag">ld: library not found for -lcrt0.o on OSX 10.6 with gcc/clang -static flag</a></p>
</blockquote>
<p>이런저런 힘들었던 일이 있었지만 iHEIC를 다 만들고 돌아보니 이러한 과정도 좋은 경험이었다고 생각이 듭니다.</p>
<h2>마무리 인사</h2>
<p>오랜만에 즐겁게 코딩을 할 수 있어서 너무 좋았습니다! 아마 다음 코딩은 Electron 기반의 게임을 만들 거같습니다.<br>
왜냐면... 제가 요즘 카이로소프트의 '던전마을 스토리2'를 너무 재밌게 하고 있어서요...!<br>
이런 스타일의 게임을 만들어보려고 합니다.<br>
시간 나면 React Native도 사용해보려 합니다!</p>
<p>긴 글 읽어주셔서 감사합니다!😀</p>
</div></article></main><footer class="c-cpkrrK"><div class="c-fiqONv">© <!-- -->2022</div><div class="c-bHyrwK"><div class="c-iUFgVP">Kh.</div><div class="c-cshSRb">KyuHyuk Lee</div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"excerpt":" 여자친구가 회사 업무로 아이폰으로 찍은 사진을 Windows PC로 옮길 일이 잦은데 일일이 변환해 주기 귀찮기도 하고, 그렇다고 웹 사이트에서 JPG로 변환해서 쓰라고 하기에는 서비스를 제공하는 웹사이트의 서버에저장되는 걸 원치 않을 거 같아 iHEIC라는 프로그램을 만들어보았습니다","url":"/article/ordinary-life/2021/09/05/iHEIC-Development-Story","frontmatter":{"title":"HEIC를 JPG로 손쉽게 바꿔주는 iHEIC 개발 후기","date":"2021-09-05 00:49:09","category":"Ordinary-Life"},"content":"\r\n여자친구가 회사 업무로 아이폰으로 찍은 사진을 Windows PC로 옮길 일이 잦은데 일일이 변환해 주기 귀찮기도 하고, 그렇다고 웹 사이트에서 JPG로 변환해서 쓰라고 하기에는 서비스를 제공하는 웹사이트의 서버에저장되는 걸 원치 않을 거 같아 iHEIC라는 프로그램을 만들어보았습니다.\r\n\r\n제가 기존에 사용했던 프로그램은 [strukturag](https://github.com/strukturag)님이 만든 [libheif](https://github.com/strukturag/libheif)를 이용하였습니다. 문제는 터미널에서 명령어를 입력해야 하기 때문에 이런 것에 익숙하지 않은 사람들은 사용하기 힘들 것으로 보여 iHEIC를 만들었습니다.\r\n\r\n**iHEIC는 아래와 같이 동작합니다:**\r\n\r\n1. iHEIC에 변환할 HEIC 파일을 드래그하여 추가합니다.\r\n2. Start 버튼을 눌러 변환을 추가합니다.\r\n3. iHEIC에 추가한 파일이 있었던 위치에 변환된 JPG 파일이 위치하게 됩니다.\r\n\r\n![iHEIC Preview](/assets/image/2021-09-06-iHEIC-Development-Story/2021-09-06-iHEIC-Development-Story_1.gif)\r\n\r\n## 왜 Electron으로 개발했나요?\r\n\r\nWindows, Linux, macOS 모두 지원하는 프로그램을 만들고 싶었습니다!\r\n\r\nElectron으로 개발하게 되면 소스코드 하나로 여러 OS에서 동작하는 프로그램을 만들 수 있습니다.  \r\n또한 [React](https://reactjs.org/)와 [Ant Design](https://ant.design/) Component를 사용한다면 간편하게 GUI 프로그램을 만들 수 있습니다.\r\n\r\n![iHEIC running on Windows, Linux and macOS](/assets/image/2021-09-06-iHEIC-Development-Story/2021-09-06-iHEIC-Development-Story_2.png)\r\n\r\n## 개발하면서 힘들었던 점은 무엇인가요?\r\n\r\n[libheif](https://github.com/strukturag/libheif)에 있는 `heif-convert`를 정적으로 컴파일하여 libjpeg, libde265, libheif 라이브러리가 설치되어 있지 않은 환경에서도 사용할 수 있게 만들고 싶었습니다.  \r\n하지만, libc가 정적으로 빌드가 되어있지 않아서 Linking하는 단계에서 오류가 발생하여 결국 [x86_64-static-linux-musl](https://github.com/LeeKyuHyuk/x86_64-static-linux-musl)라는 크로스 컴파일러를 만들어 해결하였습니다.  \r\n문제는 여기서 끝이 아니었습니다. `heif-convert`를 Windows, macOS으로 크로스 컴파일을 하려고 했는데 Windows는 `x86_64-w64-mingw32` 크로스 컴파일러를 빌드 하여 해결하였지만 macOS는 `x86_64-apple-darwin`와 같은 크로스 컴파일러를 만드는 방법을 몰라 직접 Macbook Air에서 빌드 하려고했습니다.  \r\nmacOS는 기본으로 LLVM을 사용하는데 `LDFLAGS`에 `-static`을 넣어 빌드를 할 수 없다는 걸 한 시간이 지나서야 알게 되었습니다.\r\n\r\n\u003e [ld: library not found for -lcrt0.o on OSX 10.6 with gcc/clang -static flag](https://stackoverflow.com/questions/3801011/ld-library-not-found-for-lcrt0-o-on-osx-10-6-with-gcc-clang-static-flag)\r\n\r\n이런저런 힘들었던 일이 있었지만 iHEIC를 다 만들고 돌아보니 이러한 과정도 좋은 경험이었다고 생각이 듭니다.\r\n\r\n## 마무리 인사\r\n\r\n오랜만에 즐겁게 코딩을 할 수 있어서 너무 좋았습니다! 아마 다음 코딩은 Electron 기반의 게임을 만들 거같습니다.  \r\n왜냐면... 제가 요즘 카이로소프트의 '던전마을 스토리2'를 너무 재밌게 하고 있어서요...!  \r\n이런 스타일의 게임을 만들어보려고 합니다.  \r\n시간 나면 React Native도 사용해보려 합니다!\r\n\r\n긴 글 읽어주셔서 감사합니다!😀\r\n"},"__N_SSG":true},"page":"/article/[category]/[year]/[month]/[day]/[slug]","query":{"category":"ordinary-life","year":"2021","month":"09","day":"05","slug":"iHEIC-Development-Story"},"buildId":"nfr2aTSmvqwqhq5MQ8S8d","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>