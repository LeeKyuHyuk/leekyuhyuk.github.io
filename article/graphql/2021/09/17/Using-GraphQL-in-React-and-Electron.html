<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><style id="stitches"></style><link rel="preload" href="/_next/static/css/98b299b94b0a7962.css" as="style"/><link rel="stylesheet" href="/_next/static/css/98b299b94b0a7962.css" data-n-g=""/><link rel="preload" href="/_next/static/css/5c3da54741072322.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5c3da54741072322.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-dea678fb5840c50f.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-f2f237ba7e9012fc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9b6890f28bc766f1.js" defer=""></script><script src="/_next/static/chunks/803-9fe1c131242daf24.js" defer=""></script><script src="/_next/static/chunks/785-d1ab2e5b6dacd475.js" defer=""></script><script src="/_next/static/chunks/pages/article/%5Bcategory%5D/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bslug%5D-6501b82d330bbee5.js" defer=""></script><script src="/_next/static/dFiaKGJXnX9ZfXI4gZrP9/_buildManifest.js" defer=""></script><script src="/_next/static/dFiaKGJXnX9ZfXI4gZrP9/_ssgManifest.js" defer=""></script></head><body><div id="__next"></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"excerpt":" 이전 글 에서구축했던 GraphQL 서버와 React \u0026 Electron Project와 연동하는 방법을 정리해 보았습니다. React \u0026 Electron 프로젝트 생성 Electron-Typescript-React-Webpack-Boilerplate 을사용하여 React \u0026 Elec","url":"/article/graphql/2021/09/17/Using-GraphQL-in-React-and-Electron","frontmatter":{"title":"React \u0026 Electron에서 GraphQL 사용하기","date":"2021-09-17 03:27:23","category":"GraphQL"},"content":"\r\n[이전 글](https://kyuhyuk.kr/article/graphql/2021/09/16/Building-a-GraphQL-Server-with-NestJS)에서구축했던 GraphQL 서버와 React \u0026 Electron Project와 연동하는 방법을 정리해 보았습니다.\r\n\r\n# React \u0026 Electron 프로젝트 생성\r\n\r\n[Electron-Typescript-React-Webpack-Boilerplate](https://github.com/LeeKyuHyuk/Electron-Typescript-React-Webpack-Boilerplate)을사용하여 React \u0026 Electron 프로젝트를 생성합니다.  \r\n설정 방법은 [`README.md`](https://github.com/LeeKyuHyuk/Electron-Typescript-React-Webpack-Boilerplate/blob/master/README.md) 파일을 참고합니다.\r\n\r\n# React \u0026 Electron 프로젝트에 Apollo GraphQL Client 추가 및 설정\r\n\r\n아래의 패키지를 설치합니다.\r\n\r\n```bash\r\nnpm install @apollo/client apollo graphql\r\n```\r\n\r\n`package.json`의 `scripts`에 아래를 추가합니다.\r\n\r\n```json\r\n\"apollo:codegen\": \"apollo client:codegen src/types --target=typescript --outputFlat\",\r\n```\r\n\r\n`apollo.config.js`를 프로젝트 최상위 폴더에 생성합니다.\r\n\r\n**`apollo.config.js` :**\r\n\r\n```javascript\r\nmodule.exports = {\r\n  client: {\r\n    service: {\r\n      name: 'My GraphQL Server',\r\n      url: 'http://localhost:8080/graphql',\r\n      // Optional disable SSL validation check\r\n      skipSSLValidation: true,\r\n    },\r\n    includes: ['./src/**/*.tsx', './src/**/*.ts'],\r\n    tagName: 'gql',\r\n  },\r\n};\r\n```\r\n\r\n# GraphQL에서 데이터 가져오기\r\n\r\n`src/renderer/renderer.tsx`를 아래와 같이 작성합니다.\r\n\r\n**`src/renderer/renderer.tsx` :**\r\n\r\n```tsx\r\nimport { ApolloClient, ApolloProvider, gql, InMemoryCache, useQuery } from '@apollo/client';\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\n\r\nconst client = new ApolloClient({\r\n  uri: 'http://localhost:8080/graphql',\r\n  cache: new InMemoryCache(),\r\n});\r\n\r\nconst GET_ALL_PERSON = gql`\r\n  query GetAllPerson {\r\n    getAllPerson {\r\n      id\r\n      name\r\n      number\r\n      email\r\n    }\r\n  }\r\n`;\r\n\r\nReactDOM.render(\r\n  \u003cApolloProvider client={client}\u003e\r\n    \u003cdiv className=\"app\"\u003e\u003c/div\u003e\r\n  \u003c/ApolloProvider\u003e,\r\n  document.getElementById('root')\r\n);\r\n```\r\n\r\n프로젝트에서 사용되는 Query, Mutation의 Type를 생성합니다.  \r\n`npm run apollo:codegen`를 실행하면, `src` 폴더 안에 `gql`로 명시한 구문에서 사용한 Type를 `src/types`에 생성합니다.  \r\n![npm run apollo:codegen](/assets/image/2021-09-18-Using-GraphQL-in-React-and-Electron/2021-09-18-Using-GraphQL-in-React-and-Electron_1.png)\r\n\r\n**`src/renderer/renderer.tsx` :**\r\n\r\n```tsx\r\nimport { ApolloClient, ApolloProvider, gql, InMemoryCache, useQuery } from '@apollo/client';\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport { GetAllPerson, GetAllPerson_getAllPerson } from '_/types/GetAllPerson';\r\n\r\nconst client = new ApolloClient({\r\n  uri: 'http://localhost:8080/graphql',\r\n  cache: new InMemoryCache(),\r\n});\r\n\r\nconst GET_ALL_PERSON = gql`\r\n  query GetAllPerson {\r\n    getAllPerson {\r\n      id\r\n      name\r\n      number\r\n      email\r\n    }\r\n  }\r\n`;\r\n\r\nfunction AllPersonTable() {\r\n  const { loading, error, data } = useQuery\u003cGetAllPerson\u003e(GET_ALL_PERSON);\r\n\r\n  if (loading) return \u003cp\u003eLoading...\u003c/p\u003e;\r\n  if (error) return \u003cp\u003e{error.message}\u003c/p\u003e;\r\n\r\n  return (\r\n    \u003ctable\u003e\r\n      \u003cthead\u003e\r\n        \u003ctr\u003e\r\n          \u003cth\u003eName\u003c/th\u003e\r\n          \u003cth\u003eNumber\u003c/th\u003e\r\n          \u003cth\u003eEmail\u003c/th\u003e\r\n        \u003c/tr\u003e\r\n      \u003c/thead\u003e\r\n      \u003ctbody\u003e\r\n        {data?.getAllPerson?.map((person: GetAllPerson_getAllPerson) =\u003e (\r\n          \u003ctr key={person.id}\u003e\r\n            \u003ctd\u003e{person.name}\u003c/td\u003e\r\n            \u003ctd\u003e{person.number}\u003c/td\u003e\r\n            \u003ctd\u003e{person.email}\u003c/td\u003e\r\n          \u003c/tr\u003e\r\n        ))}\r\n      \u003c/tbody\u003e\r\n    \u003c/table\u003e\r\n  );\r\n}\r\n\r\nReactDOM.render(\r\n  \u003cApolloProvider client={client}\u003e\r\n    \u003cdiv className=\"app\"\u003e\r\n      \u003cAllPersonTable /\u003e\r\n    \u003c/div\u003e\r\n  \u003c/ApolloProvider\u003e,\r\n  document.getElementById('root')\r\n);\r\n```\r\n\r\n`npm run dev`를 실행하면, 아래와 같이 정상적으로 데이터를 가져오는 것을 확인할 수 있습니다.  \r\n![npm run dev](/assets/image/2021-09-18-Using-GraphQL-in-React-and-Electron/2021-09-18-Using-GraphQL-in-React-and-Electron_2.png)  \r\n![GraphQL Playground](/assets/image/2021-09-18-Using-GraphQL-in-React-and-Electron/2021-09-18-Using-GraphQL-in-React-and-Electron_3.png)\r\n"},"__N_SSG":true},"page":"/article/[category]/[year]/[month]/[day]/[slug]","query":{"category":"graphql","year":"2021","month":"09","day":"17","slug":"Using-GraphQL-in-React-and-Electron"},"buildId":"dFiaKGJXnX9ZfXI4gZrP9","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>